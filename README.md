# Python Code Generation using LLMs

The repo explores how different open-source Large language Models(LLMs) generate executable python code for querying and analyzing energy consumption data for the UCI Household Power Consumption dataset. The repo focuses on using natural language prompts for code generataion and pandas based data analysis.



**Dataset** - [Individual Household Electric Power Consumption](https://archive.ics.uci.edu/dataset/235/individual+household+electric+power+consumption)

The Individual Household Electric Power Consumption Dataset from the UCI Machine Learning Repository contains measurements of electric power usage from a single household in France, recorded between December 2006 and November 2010. The data includes minute-level readings of various power-related attributes such as global active power, global reactive power, voltage, and energy sub-metering across three household zones. This dataset is widely used for time-series analysis, energy forecasting, and testing machine learning models on real-world electrical consumption patterns.

## Repo Structure

* **Zero_Shot_prompts :** Files for Zero shot evaluation of LLMs for code generation given the natural language queries.
* **Few_shot_prompts :** Files for Few shot evaluation of LLMs for code generation given the natural language queries.
* **self_evaluation.ipynb :** Contains the python code generated by human analyst having basic pandas understanding. 


## Models
The follwoing models are used here with Groq API for the analysis.
* [Gemma2-9b-it](https://huggingface.co/google/gemma-2-9b-it)
* [Llama-70b-8192](https://console.groq.com/docs/model/llama3-70b-8192)
* [Qwen_qwq_32b](https://console.groq.com/docs/model/qwen-qwq-32b)


## Evaluation

### **Metrics Used**

1. **Execution Accuracy :** The code given by the LLM models executed succesfully.
2. **Answer Correctness :** The code given by the LLM models gave the correct answer. The correct answer were obtained by a human analyst. 

### Prompting Strategies
1. Zero_Shot_prompting
2. Few_Shot_prompting

### **Natural Language Queries Asked**

1. What was the average active power consumption in March 2007?
2. What hour of the day had the highest power usage on Christmas 2006?
3. Compare energy usage (Global_active_power) on weekdays vs weekends.
4. Find days where energy consumption exceeded 5 kWh.
5. Plot the energy usage trend for the first week of January 2007.
6. Find the average voltage for each day of the first week of February 2007.
7. What is the correlation between global active power and sub-metering values?

`self_evaluation` file contains the python code generated by human analyst having basic pandas understanding for the above natural language queries.

### **Performance Summary**

| Model Name          | Prompting Strategy | Execution Accuracy  | Answer Correctness  |
|---------------------|--------------------|---------------------|---------------------|
| **gemma2-9b-it**    | Zero Shot              | 57.14%              | 0.29                |
|                     | Few Shot               | 100%                | 0.86                |
| **llama3-70b-8192** | Zero Shot              | 57.14%              | 0.29                |
|                     | Few Shot               | 100%                | 0.86                |
| **qwen_qwq_32b**    | Zero Shot              | 85.71%              | 0.71                |
|                     | Few Shot              | 100%                | 0.86                |


